%% FILE: prod-cong.tex
%% AUTHORS: William DeMeo
%% DATE: 21 January 2017
%% COPYRIGHT: (C) 2017 William DeMeo

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                         BIBLIOGRAPHY FILE                                 %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% The `filecontents` command will crete a file in the inputs directory called 
%% refs.bib containing the references in the document, in case this file does 
%% not exist already.
%% If you want to add a BibTeX entry, please don't add it directly to the
%% refs.bib file.  Instead, add it in this file between the
%% \begin{filecontents*}{refs.bib} and \end{filecontents*} lines
%% then delete the existing refs.bib file so it will be automatically generated 
%% again with your new entry the next time you run pdfaltex.
\begin{filecontents*}{inputs/refs2.bib}
@article{Bergman-DeMeo-2016,
  author    = {Clifford Bergman and William DeMeo},
  title     = {Universal Algebraic Methods for Constraint Satisfaction Problems},
  journal   = {CoRR},
  volume    = {abs/1611.02867},
  year      = {2016},
  url       = {http://arxiv.org/abs/1611.02867},
  timestamp = {Thu, 01 Dec 2016 19:32:08 +0100},
  biburl    = {http://dblp.uni-trier.de/rec/bib/journals/corr/BergmanD16},
  bibsource = {dblp computer science bibliography, http://dblp.org}
}
  @BOOK{HM:1988,
    AUTHOR = {Hobby, David and McKenzie, Ralph},
    TITLE = {The structure of finite algebras},
    SERIES = {Contemporary Mathematics},
    VOLUME = {76},
    PUBLISHER = {American Mathematical Society},
    ADDRESS = {Providence, RI},
    YEAR = {1988},
    PAGES = {xii+203},
    ISBN = {0-8218-5073-3},
    MRCLASS = {08A05 (03C05 08-02 08B05)},
    MRNUMBER = {958685 (89m:08001)},
    MRREVIEWER = {Joel Berman},
    note = {Available from:
      \href{http://math.hawaii.edu/~ralph/Classes/619/HobbyMcKenzie-FiniteAlgebras.pdf}{math.hawaii.edu}}
  }
@article {MR3076179,
    AUTHOR = {Kearnes, Keith A. and Kiss, Emil W.},
     TITLE = {The shape of congruence lattices},
   JOURNAL = {Mem. Amer. Math. Soc.},
  FJOURNAL = {Memoirs of the American Mathematical Society},
    VOLUME = {222},
      YEAR = {2013},
    NUMBER = {1046},
     PAGES = {viii+169},
      ISSN = {0065-9266},
      ISBN = {978-0-8218-8323-5},
   MRCLASS = {08B05 (08B10)},
  MRNUMBER = {3076179},
MRREVIEWER = {James B. Nation},
       DOI = {10.1090/S0065-9266-2012-00667-8},
       URL = {http://dx.doi.org/10.1090/S0065-9266-2012-00667-8},
}
  @article {MR2893395,
    AUTHOR = {Barto, Libor and Kozik, Marcin},
    TITLE = {Absorbing subalgebras, cyclic terms, and the constraint
      satisfaction problem},
    JOURNAL = {Log. Methods Comput. Sci.},
    FJOURNAL = {Logical Methods in Computer Science},
    VOLUME = {8},
    YEAR = {2012},
    NUMBER = {1},
    PAGES = {1:07, 27},
    ISSN = {1860-5974},
    MRCLASS = {68Q17 (08A70)},
    MRNUMBER = {2893395},
    DOI = {10.2168/LMCS-8(1:7)2012},
    URL = {http://dx.doi.org/10.2168/LMCS-8(1:7)2012}
  }
  @article {MR3374664,
    AUTHOR = {Barto, Libor and Kozik, Marcin and Stanovsk{\'y}, David},
    TITLE = {Mal'tsev conditions, lack of absorption, and solvability},
    JOURNAL = {Algebra Universalis},
    FJOURNAL = {Algebra Universalis},
    VOLUME = {74},
    YEAR = {2015},
    NUMBER = {1-2},
    PAGES = {185--206},
    ISSN = {0002-5240},
    MRCLASS = {08B05 (08A05)},
    MRNUMBER = {3374664},
    DOI = {10.1007/s00012-015-0338-z},
    URL = {http://dx.doi.org/10.1007/s00012-015-0338-z},
  }  
}
\end{filecontents*}
%:biblio
\documentclass[11pt]{amsart}
% The following \documentclass options may be useful:
% preprint      Remove this option only once the paper is in final form.
% 10pt          To set in 10-point type instead of 9-point.
% 11pt          To set in 11-point type instead of 9-point.
% numbers       To obtain numeric citation style instead of author/year.

%% \usepackage{setspace}\onehalfspacing

\usepackage{amsmath}
\usepackage{amscd,amssymb,amsthm} %, amsmath are included by default
\usepackage{latexsym,stmaryrd,mathrsfs,enumerate,scalefnt,ifthen}
\usepackage{mathtools}
\usepackage[mathcal]{euscript}
\usepackage[colorlinks=true,urlcolor=black,linkcolor=black,citecolor=black]{hyperref}
\usepackage{url}
\usepackage{scalefnt}
\usepackage{tikz}
\usepackage{color}
\usepackage[margin=1in]{geometry}
\usepackage{scrextend}

%%////////////////////////////////////////////////////////////////////////////////
%% Theorem styles
\numberwithin{equation}{section}
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{prop}[theorem]{Proposition}
\theoremstyle{definition}
\newtheorem{claim}[theorem]{Claim}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{notation}[theorem]{Notation}
\newtheorem{Fact}[theorem]{Fact}
\newtheorem*{fact}{Fact}
\newtheorem{example}[theorem]{Example}
\newtheorem{examples}[theorem]{Examples}
\newtheorem{exercise}{Exercise}
\newtheorem*{lem}{Lemma}
\newtheorem*{cor}{Corollary}
\newtheorem*{remark}{Remark}
\newtheorem*{remarks}{Remarks}
\newtheorem*{obs}{Observation}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Acronyms
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% \usepackage[acronym, shortcuts]{glossaries}
%\usepackage[smaller]{acro}
\usepackage[smaller]{acronym}
\usepackage{xspace}

%% \acs{CSP} -- short version of the acronym\\
%% \acl{CSP} -- expanded acronym without mentioning the acronym.\\
%% \acp{CSP} -- plurals.\\
%% \acfp{CSP} -- long forms into plurals.\\
%% \acsp{CSP} -- short form into a plural.\\
%% \aclp{CSP} -- long form into a plural.\\
%% \acfi{CSP} -- Full Name acronym in italics and abbreviated form in upshape.\\
%% \acsu{CSP} -- short form of the acronym and marks it as used.\\
%% \aclu{CSP} -- Prints the long form of the acronym and marks it as used.\\

\acrodef{lics}[LICS]{Logic in Computer Science}
\acrodef{sat}[SAT]{satisfiability}
\acrodef{nae}[NAE]{not-all-equal}
\acrodef{ctb}[CTB]{cube term blocker}
\acrodef{tct}[TCT]{tame congruence theory}
\acrodef{wnu}[WNU]{weak near-unanimity}
\acrodef{CSP}[CSP]{constraint satisfaction problem}
\acrodef{MAS}[MAS]{minimal absorbing subuniverse}
\acrodef{MA}[MA]{minimal absorbing}
\acrodef{cib}[CIB]{commutative idempotent binar}
\acrodef{sd}[SD]{semidistributive}
\acrodef{NP}[NP]{nondeterministic polynomial time}
\acrodef{P}[P]{polynomial time}
\acrodef{PeqNP}[P $ = $ NP]{P is NP}
\acrodef{PneqNP}[P $ \neq $ NP]{P is not NP}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% \usepackage{inputs/proof-dashed}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Put new macros in the macros.sty file
\usepackage{inputs/macros}

\begin{document}

\title[Difference Term Operation for $\bF_{\sV}(2)$]
{Difference term operations for finite 2-generated idempotent free algebras}
\date{\today}
% \author[W.~DeMeo]{William DeMeo}
\address{University of Hawaii}
\email{williamdemeo@gmail.com}

%% \thanks{The authors would like to extend special thanks to...}

\maketitle

\renewcommand{\etaR}{\ensuremath{\eta}}

\begin{abstract}
This note provides some tools that should enable us to prove
the following: if $\bA$ is a finite idempotent algebra with a
difference term operation, then the 2-generated free algebra in $\bbV(\bA)$ has
a difference term operation.  
\end{abstract}

\section{Definitions and Preliminary Facts}
\label{sec:facts}

Let $\sV$ be a variety (equational class) of algebras.
A ternary term $d$ in the language of $\sV$ is called 
a \defn{difference term for $\sV$} if it satisfies the following:
%% for all $\bA = \<A, \dots \> \in \sV$ and $a, b \in A$ we have
for all $\bA = \<A, \dots \> \in \sV$, for all $a, b \in A$, for every 
congruence $\theta\in \Con\bA$ containing $(a,b)$, we have
\begin{equation}
  \label{dt-rel}
  a \comm \theta \theta d^{\bA}(a,b,b), \; \text{ and }
\end{equation}
\begin{equation}
  \label{dt-id}
d^{\bA}(a,a,b) = b, 
\end{equation}
where %% $\theta$ is any congruence of $\bA$ containing $(a,b)$ and
$[\cdot, \cdot]$ denotes the (term condition) commutator
%% defined in Section~\ref{sec:definitions} below
(see also~\cite{HM:1988} or~\cite{MR3076179}).
(By the monotonicity of the commutator, we could replace $\theta$ in the
definition by $\Cg^{\bA}(a,b)$.)

Notice that part of
the definition of a difference term involves one of
the identities satisfied by a Malcev term, namely
(\ref{dt-id}). Below we refer to this as the ``strong (difference term) identity,''
and we refer to (\ref{dt-rel}) as the ``weak (difference term) relation.''
We refer to (\ref{dt-rel}) and (\ref{dt-id}) collectively as the ``difference term
realtions.''

Suppose $\bA$ is an algebra and for all $a,b \in A$
the operation $d^{\bA}$ satisfies the difference term relations when
$\theta = \Cg^{\bA}(a,b)$, then we call $d^{\bA}$
a \defn{difference term operation} for $\bA$
(whether or not $d$ is a difference
term for the whole variety inhabited by $\bA$).

If $d$ is idempotent, it may be convenient to present the difference term
relations as follows:
\begin{equation}
  \label{dt-rel-idemp}
  d^{\bA}(a,a,a) \comm \theta \theta d^{\bA}(a,b,b), \; \text{ and }
\end{equation}
\begin{equation}
  \label{dt-id-idemp}
d^{\bA}(a,a,b) =   d^{\bA}(b,b,b).
\end{equation}

In Lemma~\ref{lem:preliminary-facts} we gather
some easy facts that will be useful below.
We use $\com{\theta}$ as a convenient shorthand for 
$[\theta,\theta]$. %% (= the term condition commutator of $\theta$ with itself).
It will also be convenient to have indexed copies of $\bF$, viz.,
let $\bF_i \cong \bF$ denote the ``$i$-th copy'' of $\bF$. 
\begin{lemma}
\label{lem:preliminary-facts}
Let $\sV$ be an idempotent variety and suppose 
$\bF = \<F, \dots\> = \bF_{\sV}(x,y)$ is finite. 
Let $\bF_0 \times \bF_1$ be the product of two copies of $\bF$.
Let $\bR = \<R, \dots\> = \Sg^{\bF^2}\{(x, x), (x, y), (y, y)\}$. 
% the subalgebra of $\bF^2$ generated by the set $\{(x, x), (x, y), (y, y)\}$.
Then the following hold:
\begin{enumerate}
\item \label{item:1}
  $\Cg^{\bF}(x,y) = 1_F$.

  \smallskip
\item \label{item:1.5}
  If $[1_F, 1_F] = 1_F$ (i.e., $1_F$ is ``neutral''), then
  $\bF$ has a difference term operation.

\smallskip
\item \label{item:2}
The quotient algebra $\bF/\com{\Cg^{\bF}(x,y)} = \bF/[1_F,1_F]$ is abelian.


\smallskip
\item \label{item:3}
$\bR$ is a subdirect product of $\bF_0$ and $\bF_1$.

\smallskip
\item \label{item:4}
$\bigl(\{x\} \times F\bigr) \cup \bigl(F \times \{y\}\bigr) \subseteq R$.

\smallskip
\item \label{item:5}
If $\etaR_i$ denotes the kernel of the
$i$-th projection $\bR \onto \bF_i$, then 
$\etaR_0 \join \etaR_1 = 1_R$ and 
\[
\etaR_0 \circ \etaR_1 \circ \etaR_0 = \etaR_0 \join \etaR_1 = 
  \etaR_1 \circ \etaR_0 \circ \etaR_1.
\]
\end{enumerate}
\end{lemma}

\pagebreak  

\begin{proof}\
  \begin{enumerate}
  \item  This is obvious.  In fact, $\Cg^{\bB}(a,b)=1_B$ holds for every
    2-generated idempotent algebra $\bB = \Sg^{\bB}(a,b)$ (with generators
    $a$ and $b$).  If $(c,d) \in B^2$, then there are terms $s$ and $t$
    such that $s(a,b) = c$ and $t(a,b) = d$.  Therefore, 
    $(c,b) = (s(a,b), s(b,b))$ belongs to $\Cg^{\bB}(a,b)$; likewise
    $(a,d) = (t(a,a), t(a,b))$ belongs to $\Cg^{\bB}(a,b)$, so
    $c \mathrel{\Cg^{\bF}(x,y)} b\mathrel{\Cg^{\bF}(x,y)} a \mathrel{\Cg^{\bF}(x,y)} d$,
    as desired.\\
    %% NEW PROOF: (finish this later if necessary)\\
    %% Consider the homomorphism from $\bF:= \bF_{\sV}(x,y)$ onto the 1-generated free
    %% algebra $\bF_{\sV}(z)$ that maps both $x$ and $y$ to $z$.  The kernel
    %% $\theta$ is a congruence that contains $(x,y)$, so
    %% $\Cg^{\bF}(x,y)\leq \theta$.... 
    
    
  \item If $[1_F,1_F] = \com{\Cg^{\bF}(x,y)} = \Cg^{\bF}(x,y) = 1_F$, then every term
  trivially satisfies the condition
  $t^{\bF}(x,y,y) \comr{\Cg^{\bF}(x,y)} x$.  Therefore, the third projection
  $d^{\bF}(x,y,z) = z$ is a difference term operation for $\bF$.

\item  This holds because %, by (\ref{item:1}),
  $\com{\Cg^{\bF}(x,y)} = \comm{1_F}{1_F}$ and $\CC{1_F}{1_F}{\comm{1_F}{1_F}}$
  implies $\CC{1_{F/\delta}}{1_{F/\delta}}{0_{F/\delta}}$, where
  $\delta := \comm{1_F}{1_F}$.

\item It is obvious. 
(We denote this by $\bR \sdp \bF_0 \times \bF_1$.)


\item
  Since $\bF$ is idempotent, $\{x\}$ is a subuniverse of $\bF$, and since
  $\{x, y\}$ generates $\bF$, we see that
  $\{x\} \times \bF \leq \Sg^{\bF^2}\{(x,x), (x,y)\}\leq \bR$.
  Similarly, $\bF\times \{y\} \leq \Sg^{\bF^2}\{(x,y), (y,y)\}\leq \bR$.
  Therefore,
  $\bigl(\{x\} \times F\bigr) \cup \bigl(F \times \{y\}\bigr) \subseteq R$.


\item By (\ref{item:4}), for every $b \in F$ the pair $(x,b)$ lies in $R$, and for every
  $a\in F$ the pair $(a,y)$ lies in $R$.
  It follows that the projection kernels $\etaR_0$ and $\etaR_1$ 3-permute and
  join to $1_R$.
  % \[
  % \etaR_0 \circ \etaR_1 \circ \etaR_0 = 
  % \etaR_1 \circ \etaR_0 \circ \etaR_1 =
  % \etaR_0 \join \etaR_1 = 1_R.
  % \]
  Indeed, if $(a,b)$ and $(a',b')$ are arbitrary pairs in $R$, then
  \[ (a,b) \mathrel{\etaR_0} (a,y) \mathrel{\etaR_1} (a',y) \mathrel{\etaR_0}
    (a',b') \quad \text{ and } \quad 
  (a,b) \mathrel{\etaR_1} (x,b) \mathrel{\etaR_0} (x,b') \mathrel{\etaR_1} (a',b'). \]
  \end{enumerate}
\end{proof}


  %% NEW PROOF:
  %% Since $\bF$ is idempotent, $\{x\}$ is a subuniverse of $\bF$, and since
  %% $\{x, y\}$ generates $\bF$, we see that
  %% $\{x\} \times \bF \leq \Sg^{\bF^2}\{(x,x), (x,y)\}\leq \bR$.
  %% Similarly, $\bF\times \{x\} \leq \Sg^{\bF^2}\{(x,x), (y,x)\}\leq \bR$.
  %% Therefore,
  %% \[
  %% \{x\} \times \bF \cup \bF \times \{x\} \subseteq \bR.
  %% \]
  %% In particular, for every $b \in F$ the pair $(x,b)$ lies in $R$, and for every
  %% $a\in F$ the pair $(a,x)$ lies in $R$.

  %% NEW NEW PROOF:
  % Since $\bF$ is idempotent, $\{x\}$ is a subuniverse of $\bF$, and since
  % $\{x, y\}$ generates $\bF$, we see that
  % $\{x\} \times \bF \leq \Sg^{\bF^2}\{(x,x), (x,y)\}\leq \bR$.
  % Similarly, $\bF\times \{y\} \leq \Sg^{\bF^2}\{(x,y), (y,y)\}\leq \bR$.
  % Therefore,
  % \[
  % \bigl(\{x\} \times \bF\bigr) \cup \bigl(\bF \times \{y\}\bigr) \subseteq \bR.
  % \]
  % In particular, for every $b \in F$ the pair $(x,b)$ lies in $R$, and for every
  % $a\in F$ the pair $(a,y)$ lies in $R$.
  % It follows that the projection kernels $\eta_0$ and $\eta_1$ 3-permute:
  % \[
  % \eta_0 \circ \eta_1 \circ \eta_0 = 
  % \eta_1 \circ \eta_0 \circ \eta_1 =
  % \eta_0 \join \eta_1 = 1_R.
  % \]
  % Indeed, if $(a,b)$ and $(a',b')$ are arbitrary pairs in $R$, then
  %% OLD PROOF:
  %% \[ (a,b) \mathrel{\eta_0} (a,x) \mathrel{\eta_1} (a',x) \mathrel{\eta_0} (a',b'). \]
  %% \[ (a,b) \mathrel{\eta_1} (x,b) \mathrel{\eta_0} (x,b') \mathrel{\eta_1} (a',b'). \]
  %% NEW PROOF:
%   \[ (a,b) \mathrel{\eta_0} (a,y) \mathrel{\eta_1} (a',y) \mathrel{\eta_0} (a',b'). \]
%   and
%   \[ (a,b) \mathrel{\eta_1} (x,b) \mathrel{\eta_0} (x,b') \mathrel{\eta_1} (a',b'). \]
% \end{proof}

\section{Main Result}
Our goal is to prove Theorem~\ref{thm:main-result} below.\footnote{(I believe we are nearly there.)}
%% $\bF = \<F, \dots\> = \bF_{\sV}(x,y)$ is finite. 
\begin{lemma}
  If $d$ is a difference term operation for $\bA$,
  then $d(x,x,y) \approx y$ holds in $\sV = \bbV(\bA)$.
  In particular, interpreted in the 2-generated free algebra
  $\bF := \bF_{\sV}(x,y)$, we have $d^{\bF}(x,x,y) = y$.
\end{lemma}
\begin{proof}
  $d(x,x,y) \approx y$ is an identity in
  $\sV = \sansH \sansS \sansP(\bA)$ since 
  $d^{\bA}(a,a,b) = b$ holds $\forall a, b \in A$.
  %% is an identity in $\bA$.
  %% OLD PROOF:
  %% One way to see this is to note that $\bF$ is a subdirect product of some
  %% finite number of 2-generated subalgebras of $\bA$, say,
  %% $\bF \sdp \bA_0 \times \cdots \times \bA_{n-1}$. Also, when interpreted
  %% in the subalgebra $\bA_i \leq \bA$, the term $d$ at least obeys the Malcev
  %% part of the difference term conditions that it satisfies when interpreted in $\bA$.
  %% That is,   $d^{\bA_i}(a_i, a_i, b_i) = b_i$ for all $a_i, b_i \in A_i$.
  %% Therefore, if $x = (a_0, \dots, a_{n-1})$ and $y = (b_0, \dots, b_{n-1})$, then we have
  %% \[d^{\bF}(x,x,y) = (d^{\bA_0}(a_0, a_0, b_0),
  %% \dots,d^{\bA_{n-1}}(a_{n-1}, a_{n-1}, b_{n-1})) = (b_0, \dots, b_{n-1}) = y.\]
\end{proof}
  % Fix $a, b\in A$ and suppose $\phi: \bF \to \bA$ is a homomorphism with
  % $\phi(x) = a$ and $\phi(y) = b$.  Then
  % we have
  % $\phi(d^{\bF}(x,x,y)) = d^{\bA}(\phi(x),\phi(x),\phi(y)) = d^{\bA}(a,a,b) = b$,
  % so $(d^{\bF}(x,x,y), y) \in \ker \phi$. Therefore, we must have
  % $d^{\bF}(x,x,y) = y$, so $d^{\bF}$ is a difference term operation for $\bF$.


%% NEW STUFF
% Before proving the next result, it will be helpful to review some standard
% notation that is useful when dealing with products of quotients.  If $\alpha$
% and $\beta$ are congruences of $\bA$ and 
% $\bB$ (or, more generally, equivalence relations on $A$ and $B$), then
% for all $a\in A$ and $b\in B$, we let
% \[
% (a,b)/\alpha \times \beta = \{(a', b') \in A\times B \mid a\mathrel{\alpha} a', \;
% b\mathrel{\beta} b'\} = a/\alpha \times b/\beta.
% \]
% \[
% (A\times B)/\alpha \times \beta = \{(a, b)/\alpha \times \beta \mid a\in A,\, b \in B\}
%  = ...
% \]


\begin{theorem}
\label{thm:main-result}
Let $\bA = \<A, \dots\>$ be a finite idempotent algebra.
% and $\sV = \bbV(\bA)$ the
% variety it generates.  A
Assume $\bA$ has a difference term operation and 
$\sV = \bbV(\bA)$ has a Taylor term.
Then $\bF = \bF_{\sV}(x,y)$ has a difference term operation.
%% Assume $\bF \sdp \bA \times \bB$.
\end{theorem}
\begin{proof}
Let $\bF_0 \times \bF_1$ be the product of two copies of $\bF$,
and let $\bR = \<R, \dots\>  \sdp \bF_0 \times \bF_1$ be the subalgebra generated
by the set $\{(x, x), (x, y), (y, y)\}$ (as above).
Recall from Lemma~\ref{lem:preliminary-facts}~(\ref{item:1}) that
$\com{\Cg^{\bF}(x,y)} = [1_{F},1_{F}]$.  Therefore, if we can prove 
\begin{equation}
  \label{eq:1}
%% R \cap \bigl(\{y\} \times (x/\com{\Cg^{\bF_1}(x,y)})\bigr) \neq \emptyset.
R \cap \bigl(\{y\} \times (x/[1_{F_1},1_{F_1}])\bigr) \neq \emptyset,
\end{equation}
then there is a term $t$ satisfying
\[
t^{\bF^2}((x,x),(x,y),(y,y)) =\bigl(t^{\bF}(x,x,y), t^{\bF}(x,y,y)\bigr) \in
\{y\} \times \bigl(x/\com{\Cg^{\bF}(x,y)}\bigr).
%% \{y\} \times \bigl(x/[1_{F_1},1_{F_1}]\bigr).
\]
In other words,
%% \begin{equation}
%%   \label{dt2-rel}
%%   x \comr{\Cg^{\bF}(x,y)} t^{\bF}(x,y,y), \;  \text{ and }
%% \end{equation}
%% \begin{equation}
%%   \label{dt2-id}
%% t^{\bF}(x,x,y) = y.
%% \end{equation}
$x \comr{\Cg^{\bF}(x,y)} t^{\bF}(x,y,y)$ and
$t^{\bF}(x,x,y) = y$, which means that $t$ is a difference term operation when
interpreted in $\bF$.  So it suffices to prove~(\ref{eq:1}). 

%% Of course, $[1_F, 1_F]\leq 1_F$ and
%% Lemma~\ref{lem:preliminary-facts}~(\ref{item:1.5}) dispenses with 
%% the case in which these congruences are equal.
%% So, assume $[1_F, 1_F]< 1_F$.
%% In particular, $(x,y) \notin [1_F, 1_F]$.

%% Now $\com{\Cg^{\bF}(x,y)}$ and $\Cg^{\bF}(x,y)$ are both subalgebras of $\bF^2$
%% and by idempotence, each class of each of these congruences is a subalgebra of $\bF$.
%% By Lemma~\ref{lem:preliminary-facts}~(\ref{item:1}) we have 
%% $\Cg^{\bF}(x,y) = 1_F$ and $\com{\Cg^{\bF}(x,y)} = [1_F,1_F]$, so our assumption
%% is $[1_F,1_F]< 1_F$.  
%% Recall from Lemma~\ref{lem:preliminary-facts}~(\ref{item:2}) that the
%% algebra $\bF/[1_F, 1_F]$ is abelian.
Observe that $\bR/\etaR_i \cong \bF_i$ for $i \in \{0,1\}$.
Let $\rho_1 \in \Con(\bR)$ be the congruence
(above $\etaR_1$) corresponding to $[1_{F_1}, 1_{F_1}]$ via the projection
homomorphism $\bR \onto \bF_1$.  Then
\[
\bR/\rho_1 \cong (\bR/\etaR_1)/(\rho_1/\etaR_1) \cong \bF_1/[1_{F_1}, 1_{F_1}],
\]
so, by Lemma~\ref{lem:preliminary-facts}~(\ref{item:2}),
$\bR/\rho_1$ is abelian.  Moreover, $\bR/(\etaR_0\meet \rho_1)$ is a subdirect
product of $\bR/\etaR_0 \cong \bF_0$ and  
$\bR/\rho_1 \cong \bF_1/[1_{F_1}, 1_{F_1}]$.  That is,
\[
\bR/(\etaR_0\meet \rho_1) \sdp \bF_0\times 
\bigl(\bF_1/[1_{F_1}, 1_{F_1}]\bigr).
\]
Of course, $\tau_0 := \etaR_0/(\etaR_0\meet \rho_1)$ is the kernel of the
projection of $\bR/(\etaR_0\meet \rho_1)$ onto $\bF_0$, so
\[
\bigl(\bR/(\etaR_0\meet \rho_1)\bigr)\bigl(\etaR_0/(\etaR_0\meet \rho_1)\bigr)
\cong \bR/\etaR_0 \cong \bF_0,
\]
and $\tau_1 := \rho_1/(\etaR_0\meet \rho_1)$ is the kernel of the
projection of $\bR/(\etaR_0\meet \rho_1)$ onto $\bF_1/[1_{F_1},1_{F_1}]$, so
\[
\bigl(\bR/(\etaR_0\meet \rho_1)\bigr)/\bigl(\rho_1/(\etaR_0\meet \rho_1)\bigr)
\cong \bR/\rho_1 \cong \bF_1/[1_{F_1},1_{F_1}].
\]
Next observe that
%% Then $\bR/(\rho_0\meet \rho_1)$ is a subdirect product of $\bF_0/[1_{F_0}, 1_{F_0}]$ and 
%% $\bF_1/[1_{F_1}, 1_{F_1}]$.  That is
%% \[
%% \bR/(\rho_0\meet \rho_1) \sdp \bF_0/[1_{F_0}, 1_{F_0}] \times 
%% \bF_1/[1_{F_1}, 1_{F_1}].
%% \]
%% Next observe that if $\tau_i$ denotes the kernel of the projection of 
%% $\bR/(\rho_0\meet \rho_1)$ onto $\bF_i/[1_{F_i}, 1_{F_i}]$, then 
$\tau_0\join \tau_1 = 1_{R/(\etaR_0\meet \rho_1)}$. (This is clear since
$\rho_1\geq \eta_1$, so  $\eta_0 \join \rho_1 \geq \eta_0 \join \eta_1 = 1_R$.)
Thus, by the Absorption Theorem (Theorem~\ref{thm:absorption} below),
exactly one of the following holds:
\begin{enumerate}
\item \label{item:6} $\bR/(\eta_0\meet \rho_1) =\bF_0 \times \bigl(\bF_1/[1_{F_1}, 1_{F_1}]\bigr)$;
\item \label{item:7} $\bF_0$ has a proper nontrivial minimal absorbing subuniverse;
\item \label{item:8} $\bF_1/[1_{F_1}, 1_{F_1}]$ has a proper
  nontrivial minimal absorbing subuniverse.
\end{enumerate}

From this point on, we drop the subscript from $\bF_1$, since it is no longer
needed to distinguish between the first and second factors of the product.

%% \newcommand{\Fone}{\ensuremath{F_1}}
%% \newcommand{\bFone}{\ensuremath{\mathbf{F}_1}}
\newcommand{\Fone}{\ensuremath{F}}
\newcommand{\bFone}{\ensuremath{\mathbf{F}}}

If~(\ref{item:6}), then we're done since, in that case,
$(y, x/[1_{\Fone},1_{\Fone}]) \in R/(\etaR_0 \meet \rho_1)$,
which implies $(y, z) \in R$ for some $z \comm{1_{\Fone}}{1_{\Fone}} x$.
That is, (\ref{eq:1}) holds.
We can rule out case~(\ref{item:8}) because $\bFone/[1_{\Fone}, 1_{\Fone}]$ is abelian and
is therefore absorption free (see~\cite{MR3374664}),  %% and~\cite{Bergman-DeMeo}.)
so $\Fone/[1_{\Fone}, 1_{\Fone}]$ is the minimal absorbing subuniverse of $\bFone/[1_{\Fone}, 1_{\Fone}]$.


We are left with case~(\ref{item:7}).
Let $B_0$ be a minimal absorbing subuniverse of $\bF_0$.
Then the product algebra $\bB_0\times \bigl(\bFone/[1_{\Fone}, 1_{\Fone}]\bigr)$ is
absorbtion free.
Since $\bR/(\etaR_0 \meet \rho_1)$ is subdirect, the intersection
$R/(\etaR_0 \meet \rho_1) \cap \bigl(B_0 \times (\Fone/[1_{\Fone}, 1_{\Fone}])\bigr)$ is
non-empty. Therefore, by the Absorption Theorem (Thm.~\ref{thm:absorption}
below), together with~\cite[Lemmas~4.7, 4.9, 4.11, 4.12]{Bergman-DeMeo-2016},
we have
\begin{equation}
  \label{eq:2}
%% \bR/(\etaR_0 \meet \rho_1) \cap \bB_0 \times \Fone/[1_{\Fone}, 1_{\Fone}]
  %% = \bB_0 \times \Fone/[1_{\Fone}, 1_{\Fone}].
B_0 \times \bigl(\Fone/[1_{\Fone}, 1_{\Fone}]\bigr) \subseteq R/(\etaR_0 \meet \rho_1).
%% R/(\etaR_0 \meet \rho_1) \cap B_0 \times \Fone/[1_{\Fone}, 1_{\Fone}]
%% = \bB_0 \times \Fone/[1_{\Fone}, 1_{\Fone}].
\end{equation}
%% This follows from 

We split the remainder of the proof into two subcases.\\
\\
\noindent \underline{Subcase 1: $y\in B_0$}\\[5pt]
In this case we're done, since $y\in B_0$ together with (\ref{eq:2}) imply
%% $\bB_0 \times \Fone/[1_{\Fone}, 1_{\Fone}] \subseteq \bR/(\etaR_0 \meet \rho_1)$,
${y} \times \bigl(x/[1_{\Fone}, 1_{\Fone}]\bigr) \in R$.\\
\\
\noindent \underline{Subcase 2: $y\notin B_0$}\\[5pt]



\bigskip

\bigskip

That $\bR/\rho_1 \cong \bFone/[1_{\Fone},1_{\Fone}]$ is abelian means
$\CC{1_{R/\rho_1}}{1_{R/\rho_1}}{0_{R/\rho_1}}$ holds, and this is equivalent to
$\CC{1_R}{1_R}{\rho_1}$. By a result of Kearnes and Kiss
(Thm.~\ref{thm:kearnes-kiss-3.27} below), the latter
holds if and only if $\CC{\etaR_0}{\etaR_0}{\etaR_0\meet \rho_1}$.
It follows that $[\etaR_0, \etaR_0]\leq \etaR_0 \meet \rho_1$.
\bigskip

\noindent TODO: finish proof!!!

\vfill

\end{proof}

\pagebreak

\bibliographystyle{alphaurl}
\bibliography{inputs/refs2.bib}

% \newpage
\appendix

\section{Miscellaneous Theorems}
We collect here some well known results that were used above.

\subsection{Absorption Theorem of Barto and Kozik}
% K and Theorem 3.2 of BKS}
% First we recall the Absorption Theorem  of Barto and Kozik.
\begin{theorem}[Absorption Theorem \protect{\cite[Thm~2.3]{MR2893395}}]
\label{thm:absorption}
%% If $\var{V}$ is an idempotent locally finite variety, then the following are equivalent:
%% \begin{itemize}
%% \item $\var{V}$ is a Taylor variety;
%% \item if $\bA_0, \bA_1 \in \var{V}$ are finite absorption-free algebras, 
%%   and if $\bR \sdp \bA_0 \times \bA_1$ is linked, then $\bR = \bA_0 \times \bA_1$.
%% \end{itemize}
Let $\bA$ and $\bB$ be finite
idempotent algebras with Taylor terms; let $\bR$ be a subdirect product of
$\bA \times \bB$, and let $\etaR_A$ ($\etaR_B$, resp.) be the kernel of the
projection $\bR \onto \bA$ ($\bR \onto \bB$, resp.).
If $\etaR_A \join \etaR_B = 1_R$, then either $\bR = \bA \times \bB$, or
$\bA$ has a proper absorbing subuniverse, or $\bB$ has a proper absorbing subuniverse.
\end{theorem}

\subsection{A Projectivity Theorem of Kearnes and Kiss}
  \begin{theorem}[\protect{\cite[Thm~3.27]{MR3076179}}] 
    \label{thm:kearnes-kiss-3.27}
    Suppose $\alpha$ and $\beta$ are congruences of a Taylor algebra. Then
    $\CC{\alpha}{ \alpha}{ \alpha \meet \beta}$ if and only if
    $\CC{\alpha \join \beta}{ \alpha \join \beta}{ \beta}$.
  \end{theorem}


% \begin{theorem}[\protect{\cite[Theorem 3.2]{MR3374664}}]
%   Let $\sV$ be a locally finite variety generated by a set $\sA$ of
%   idempotent ``hereditarily absorption free'' algebras.
%   If $\sV$ has a Taylor term, then it has a Mal'tsev term.
% \end{theorem}
% \begin{proof}
%   Let $\bF = \bF_{\sV}(x,y)$ be the 2-generated free algebra
%   %% , with generators $x, y$, 
%   in the variety $\sV$. Since it is
%   finite, $\bF$ lies in the pseudovariety generated by $\sA$, and thus it is
%   absorption-free (see \cite[Proposition 2.1.(1)]{MR3374664}).
%   Let $\bR$ be the subalgebra of $\bF^2$ generated by
%   $(x, y), (x, x), (y, x)$. It is subdirect in $\bF^2$.
%   Since $\bF$ is idempotent, $\etaR_A \join \etaR_B = 1_R$
%   (as observed in Lemma~\ref{lem:preliminary-facts}~(\ref{item:5})).
%   Consequently, by Theorem~\ref{thm:absorption},
%   $\bR = \bF^2$, and there is a term $m$ witnessing
%   that $(y, y) \in R$, i.e., a term $m$ satisfying
%   $m((x, y), (x, x), (y, x)) = (y, y)$. This
%   term is a Mal'tsev term for $\sV$.
% \end{proof}

% \begin{remark}
%   \label{rem:absorpt-theor-bk}
%   Let $\pi_0$ and $\pi_1$ be the first and second projections of $\bR$ onto $\bF$.
%   Since $\bF$ is idempotent, $\{x\}$ is a subalgebra of $\bF$, hence the inverse
%   image of $\{x\}$ under $\pi_0$ is a subuniverse of $\bR$, call it $S_0$.
%   Since $(x,y)$ and $(x,x)$ lie in $S_0$, and $\{x,y\}$
%   generates $\bF$, we see that $\{x\}\times F$ is contained in $S_0$.
%   In particular, for every $a_1$, the pair $(x,a_1)$ must lie in $R$.
%   Similarly, there is a subalgebra $S_1$ containing
%   $F\times \{x\}$. %% Note that the kernels of $\pi_A$ and $\pi_B$ are $\eta_A$ and $\eta_B$. 
%   Finally, for any $(a_0,a_1)$ and $(a_0',a_1')$ in $R$ we have
%   %% \[
%   %% (a_1,a_2) \mathrel{\eta_B} (x,a_2) \mathrel{\eta_A} (x,x) \mathrel{\eta_B} (b_1,x) \mathrel{\eta_A} (b_1,b_2).
%   %% \]
%   \[
%   (a_0,a_1) \mathrel{\eta_1} (x,a_1) \mathrel{\eta_0} (x,a_1') \mathrel{\eta_1} (a_0',a_1').
%   \]
%   %% Cliff: You and I talked about whether Theorem 3.2 required idempotence.
%   %%        Apparently it does. Is the idempotent reduct of an abelian algebra still abelian?
% \end{remark}

\end{document}

\appendix

\section{Other ideas that, so far, haven't worked}

\subsection{Skew congruences of idempotent algebras}
Let $\sV$ be a variety and let $\bA$ and $\bB$ be idempotent
algebras in $\sV$.
Recall the following standard notation:
if $\alpha \in \Con(\bA)$ and $\beta \in \Con(\bB)$, then
$\alpha \times \beta$ denotes the set of pairs $((a,b),(a',b'))$ satisfying
$a \mathrel{\alpha} a'$ and $b \mathrel{\beta} b'$.  The relation 
$\alpha \times \beta$ is clearly a congruence of $\bA \times \bB$.

Fix $(a, b)$ and $(a', b')$ in $A \times B$.
We claim that
\[\Cg^{\bA}(a,a') \times \Cg^{\bB}(b,b')
=\Cg^{\bA \times \bB}((a, b), (a', b')).\]

Let $\tau := \Cg^{\bA}(a,a') \times \Cg^{\bB}(b,b')$  %%  \in \Con(\bA \times \bB)$
and $\theta:= \Cg^{\bA \times \bB}((a, b), (a', b'))$.
First note that $\tau$ is a product of a congruence
of $\bA$ with a congruence of $\bB$, so $\tau$
is a congruence of $\bA\times \bB$.
Moreover, the pair $((a,b), (a',b'))$ clearly belongs to $\tau$, so
$\theta\leq \tau$.  We must prove that $\tau \leq \theta$.

Fix $((x,y),(x'y')) \in \tau$. This means that
$(x,x') \in \Cg^{\bA}(a,a')$ and $(y,y')\in \Cg^{\bB}(b,b')$.
Therefore, there exist $n>0$, $m>0$, 
%% $(c_0, c_0'), (c_1, c_1'), \dots, (c_n, c_n')$ in $,  
$c_0$, $c_1$, $\dots$, $c_n$ $\in A$, $f_0$, $f_1$, $\dots$,
$f_{n-1} \in \Pol_1(\bA)$, $d_0$, $d_1$, $\dots$, $d_n\in B$, and $g_0$, $g_1$, $\dots$,
$g_{n-1} \in \Pol_1(\bB)$ such that 
\begin{align*}
  x = c_0, \; c_n=x', \text{ and } \; \{c_i, c_{i+1}\} &= \{f_i(a), f_i(a')\},
  \text{ for all $0\leq i < n$, and}\\
  y = d_0, \; d_n=y',  \text{ and }  
  \{d_i, d_{i+1}\} &= \{g_i(b), g_i(b')\}, \text{ for all $0\leq i < m$.}
\end{align*}
We can assume without loss of generality that $n=m$, since we can insert dummy
terms to extend the shorter of the two sequences.

We wish to prove $((x,y),(x'y')) \in \theta:= \Cg^{\bA \times \bB}((a, b), (a', b'))$,
which is equivalent to the following: there exist $n>0$, 
$(e_0, e_0')$, $(e_1,e_1')$, $\dots$, $(e_n, e_n') \in A\times B$, 
$h_0$, $h_1$, $\dots$, $h_{n-1} \in \Pol_1(\bA\times \bB)$ such that
\begin{align*}
  (x,y) = (e_0,e_0'), \; (e_n, e_n') &=(x',y'), \text{ and for all $0\leq i < n$, } \\
  \{(e_i, e_i'), (e_{i+1}, e_{i+1}')\} &= \{h_i(a,b), h_i(a',b')\}.
\end{align*}


Let $f = f_0$.  Since $f\in \Pol_1(\bA)$, for some $\ell>0$ there
exist a term $s^{\bA} \in \Clo_{\ell+1}(\bA)$ and $a_0, a_1, \dots, a_\ell$ in $A$ such that
\[
f^{\bA}(x) = s^{\bA}(a_0, \dots, a_{i-1}, x, a_{i+1}, \dots, a_\ell), \text{ for some $i$.}
\]
Similarly, letting $g = g_0$, for some $k>0$ there
exist a term $t^{\bB} \in \Clo_{k+1}(\bB)$ and $b_0, b_1, \dots, b_k$ in $B$ such that
\[
g^{\bB}(y) = t^{\bB}(b_0, \dots, b_{j-1}, y, b_{j+1}, \dots, b_k), \text{ for some $j$.}
\]
Without loss of generality, we can assume $j=i$. (check this)

%% Now, for
%% $\ba  = (a_0, a_1, \dots, a_{\ell})\in A^{\ell+1}$ and
%% $\bb  = (b_0, b_1, \dots, b_{\ell})\in B^{\ell+1}$, we have
%% \[
%% s^{\bA \times \bB}((a_0, b_0), \dots, (a_{\ell}, b_{\ell}))
%% = (s^{\bA}(\ba), s^{\bB}(\bb)).
%% \]
Consider the polynomial $p \in \Pol_1(\bA\times \bB)$ defined via
$s$ as follows:
\begin{align*}
p(x,y) &= s^{\bA \times \bB}((a_0, b), (a_1, b), \dots, (a_{i-1}, b),(x,y),
(a_{i+1}, b), \dots, (a_{\ell}, b))\\
&= (s^{\bA} (a_0, a_1,\dots, a_{i-1}, x, a_{i+1}, \dots, a_{\ell}), 
s^{\bB}(b, \dots, b, y, b,\dots, b))\\
&= (f^{\bA} (x), 
s^{\bB}(b, \dots, b, y, b,\dots, b)).
\end{align*}
Consider the polynomial $q \in \Pol_1(\bA\times \bB)$ defined via
$t$ as follows:
\begin{align*}
q(x,y) &= t^{\bA \times \bB}((f^{\bA}(a), b_0), (f^{\bA}(a), b_1), \dots, (f^{\bA}(a), b_{i-1}),(x,y),
(f^{\bA}(a), b_{i+1}), \dots, (f^{\bA}(a), b_{\ell}))\\
&= (t^{\bA} (f^{\bA}(a), \dots, f^{\bA}(a), x, f^{\bA}(a), \dots, f^{\bA}(a)), 
t^{\bB}(b_0, \dots, b_{i-1}, y, b_{i+1},\dots, b_{\ell}))\\
&= (t^{\bA} (f^{\bA}(a), \dots, f^{\bA}(a), x, f^{\bA}(a), \dots, f^{\bA}(a)), 
g^{\bB}(y)).
\end{align*}
Then $p(a,b) = (f^{\bA}(a), b)$ and $q(f^{\bA}(a), b) = (f^{\bA}(a),g^{\bB}(b))$.
Therefore,
\[
(q\circ p)^{\bA\times \bB} (a,b) =
(f^{\bA} (a), g^{\bB} (b)).
\]
We can carry out this construction for each pair $(f_i, g_i)$, $0\leq i < n$,
arriving at a sequence $q_i \circ p_i$ of polynomials in
$\Pol_1(\bA \times \bB)$ such that
\[
(q_i\circ p_i)^{\bA\times \bB} (a,b) =
(f_i^{\bA} (a), g_i^{\bB} (b)).
\]
Unfortunately, evaluating this polynomial at $(a',b')$ yields the less
desirable result:
\[
(q_i\circ p_i)(a',b')=
(t_i^{\bA}(f_i^{\bA} (a), \dots, f_i^{\bA} (a), f_i^{\bA} (a'),f_i^{\bA} (a), \dots, f_i^{\bA} (a)),
g_i(s_i^{\bB}(b, \dots, b, b', b,\dots, b))).
\]
So we try again...

\bigskip
%% \[
%% d_i(x,y) = d^{\bA\times \bB}((a_i,b),(a_i,b),(a_i,y)) = (d^{\bA}(a_i,a_i,a_i),
%% d^{\bB}(b,b,y)) = (a_i, d^{\bB}(b,b,y))
%% \]
Consider the polynomial $p \in \Pol_1(\bA\times \bB)$ defined via
$s$ as follows:
\begin{align*}
p(x,y) &= s^{\bA \times \bB}((a_0, y), \dots, (a_{i-1}, y), (x, y), (a_{i+1}, y), \dots, (a_{\ell}, y))\\
&= (s^{\bA} (a_0, \dots, a_{i-1}, x, a_{i+1}, \dots, a_{\ell}), 
s^{\bB}(y, \dots, y))\\
&= (f^{\bA} (x), y).
\end{align*}
Consider the polynomial $q \in \Pol_1(\bA\times \bB)$ defined via
$t$ as follows:
\begin{align*}
  q(x,y) &= t^{\bA \times \bB}(p(x,b_0),
  \dots, p(x, b_{i-1}),p(x,y),
  p(x, b_{i+1}), \dots, p(x, b_{\ell}))\\
  &= t^{\bA \times \bB}((f^{\bA}(x), b_0), \dots, (f^{\bA}(x), b_{i-1}),(f^{\bA}(x),y),
(f^{\bA}(x), b_{i+1}), \dots, (f^{\bA}(x), b_{\ell}))\\
%% &= (t^{\bA} (f^{\bA}(x), \dots, f^{\bA}(x), x, f^{\bA}(x), \dots, f^{\bA}(x)), 
%% g^{\bB}(y)).
&= (f^{\bA}(x), g^{\bB}(y)).
\end{align*}
Then $p(a,b) = (f^{\bA}(a), b)$ and $q(f^{\bA}(a), b) = (f^{\bA}(a),g^{\bB}(b))$.
Therefore,
\[
(q\circ p)^{\bA\times \bB} (a,b) =
(f^{\bA} (a), g^{\bB} (b)).
\]
We can carry out this construction for each pair $(f_i, g_i)$, $0\leq i < n$,
arriving at a sequence $q_i \circ p_i$ of polynomials in
$\Pol_1(\bA \times \bB)$ such that
\[
(q_i\circ p_i)^{\bA\times \bB} (a,b) =
(f_i^{\bA} (a), g_i^{\bB} (b)).
\]
% Unfortunately, evaluating this polynomial at $(a',b')$ yields the less
% desirable result:
% \[
% (q_i\circ p_i)(a',b')=
% (t_i^{\bA}(f_i^{\bA} (a), \dots, f_i^{\bA} (a), f_i^{\bA} (a'),f_i^{\bA} (a), \dots, f_i^{\bA} (a)),
% g_i(s_i^{\bB}(b, \dots, b, b', b,\dots, b))).
% \]

% \bigskip

% \hrule

% \bigskip

% \begin{align*}
%   f^{\bB}(y) &= s^{\bB}(d(b,b,y), \dots, d(b,b,y), y, d(b,b,y), \dots, d(b,b,y)), \; \text{ and }\\
%   g^{\bA}(x) &= t^{\bA}(f^{\bA}(a), \dots, f^{\bA}(a), x, f^{\bA}(a), \dots, f^{\bA}(a)).
% \end{align*}
% Then
% \[
% f^{\bA\times \bB} (a,b) =
% (f^{\bA} (a), f^{\bB}(b)) = (f^{\bA} (a), s^{\bB}(b, \dots, b, )) = (f^{\bA} (a), b),
% \]
% and 
% \[
% g^{\bA\times \bB} (f^{\bA} (a), b) =
% (g^{\bA} (f^{\bA} (a)), g^{\bB}(b))=
% (t^{\bA}(f^{\bA}(a), \dots, f^{\bA}(a)),g^{\bB}(b))=
% (f^{\bA} (a), g^{\bB} (b)).
% \]
% Therefore,
% \[
% (g^{\bA\times \bB}\circ f^{\bA\times \bB}) (a,b) =
% (f^{\bA} (a), g^{\bB} (b)).
% \]

% But now what happens when we evaluate 
% $(g^{\bA\times \bB}\circ f^{\bA\times \bB}) (a',b')$?
% We have
% \begin{align*}
%   f^{\bA\times \bB} (a',b') &=
%   (f^{\bA} (a'), f^{\bB}(b')) \\&= \bigl(f^{\bA} (a'), s^{\bB}(d(b,b,b'), \dots,
%   d(b,b,b'), b', d(b,b,b'),\dots, d(b,b,b'))\bigr)\\
%   &= \bigl(f^{\bA} (a'), s^{\bB}(b', \dots, b')\bigr)= \bigl(f^{\bA} (a'), b'\bigr).
% \end{align*}



%% \section{Definitions and Notations}
%% \label{sec:defin-notat}

%% Cliff's book~\cite{MR2839398}.
%% My GitHub repo~\cite{overalgebras-github}.
%% \appendix
%% \section{Appendix Title}
%% This is the text of the appendix, if you need one.

%\bibliographystyle{amsplain} %% or amsalpha
%% \bibliographystyle{plain-url}

\bibliographystyle{alphaurl}
\bibliography{inputs/refs2.bib}

\end{document}
