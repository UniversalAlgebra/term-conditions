## A poly-time test for difference terms in idempotent varieties

[William DeMeo &lt;williamdemeo@gmail.com&gt;](mailto:williamdemeo@gmail.com)  

joint work with 
[Ralph Freese](mailto:ralph@math.hawaii.edu)
& [Matt Valeriote](mailto:matt@math.mcmaster.ca)

<a style="color:#e7ad52">BLAST 2017 @ Vanderbilt<a style="color:#e7ad52">

---

## The Problem

<p class="fragment" align="left">
Can we efficiently decide whether a finite algebra $\mathbf{A}$ generates a variety with a difference term? </p>

<p class="fragment" align="left">
We will outline the proof that the answer is "yes" in the idempotent case. </p>

---

## Definition

A <a style="color:#e7ad52"><i>difference term</i></a> for $\mathcal{V}$ is a term $d$ satisfying, $\forall \; \mathbf A \in \mathcal V$ and $\forall a, b \in A$, 

$$d(a,a,b) = b \quad \text{ and } \quad
d(a,b,b) \mathrel{[\theta, \theta]} a$$

where $\theta$ is any congruence containing $(a,b)$ and $[\cdot, \cdot]$ is the *commutator*.

---

## Problem Statement

Is there a poly-time algorithm that takes a finite
idempotent algebra $\mathbf{A}$ and decides 
whether $\mathbb{V}(\mathbf{A})$ has a difference term?

<div class="fragment" align="left"><a style="color:#e7ad52">**Theorem**</a> (Kearnes, *J Algebra* 1995)   
$\mathbb{V}(\mathbf{A})$ has a difference term
$\; \Longleftrightarrow \;$  $\mathbb{V}(\mathbf{A})$ omits type 1 and type-2 tails
</div>

<p class="fragment" align="left">
Omitting 1 is poly-time decidable by Valeriote's subtype theorem.
</p>

<p class="fragment" align="left">
<a style="color:#e7ad52">**Reduced Problem**</a>   
Is there a poly-time algorithm that takes a finite 
idempotent algebra $\mathbf{A}$ and decides whether 
$\mathbb{V}(\mathbf{A})$ has nonempty type-2 tails?
</p>

---

## Strategy

<p class="fragment" align="left">
<a style="color:#e7ad52">*Kearnes:*</a>
Having a diff term is characterized by omitting 1's and type-2 tails.
</p>

<p class="fragment" align="left">
<a style="color:#e7ad52">*Valeriote:*</a>
Omitting 1's is poly-time decidable by the subtype theorem.
</p>

<p class="fragment" align="left">
<a style="color:#e7ad52">*To show:*</a> 
Type-2 tails, when they occur in $\mathbb{V}(\mathbf{A})$, 
are easy to find.
</p>

---

---?image=http://www.propinsanity.com/wp-content/uploads/2014/09/image.jpg

---

## Main Theorem

Let $\mathbf A$ be a finite idempotent algebra.

Suppose $\mathbb{V}(\mathbf A)$ omits type 1 and contains a finite algebra $\mathbf{B}$ with a type-2 prime quotient $\alpha \prec \beta$ such that the $\langle \alpha, \beta \rangle$-minimal sets have nonempty tails.

<p class="fragment" align="left">
Then there exists a 3-generated subalgebra of $\mathbf A \times \mathbf A$
with this property. </p>
  
<p class="fragment" align="left">
<a style="color:#e7ad52">**Conclusion:**</a>
to check for type-2 tails in $\mathbb{V}(\mathbf A)$ it suffices to look in 3-generated subalgebras of $\mathbf A \times \mathbf A$.
</p>

---

## Notation

$[n] = \{ 0, 1, \dots, n-1 \}, \qquad
\rho_i = \operatorname{ker} (\mathbf B \twoheadrightarrow \mathbf A_i), \qquad \rho_s = \bigwedge_s \rho_j$

<p class="fragment" align="left">
Let $S$ be a finite set of finite idempotent algebras that is closed 
under taking subalgebras. 
</p>

<p class="fragment" align="left">
Assume $\mathbb{V}(S)$ omits type 1.
</p>

<p class="fragment" align="left">
Suppose there is a finite $\mathbf{B} \in \mathbb{V}(S)$ with type-2
tails.
</p>

---

WLOG Assume $\mathbf B$ is a subdirect
product of a finite number of members of $S$. 

<p class="fragment" align="left">
Choose $n$ minimal such that for
some $\mathbf{A}_1$, $\mathbf{A}_2$, $\dots$, $\mathbf{A}_n$ in $S$,   

$$\mathbf{B} \leq_s \prod \mathbf{A}_i$$
</p>

<p class="fragment" align="left">
Under the assumption that $n > 1$ we will prove $n = 2$.
</p>

---

### Minimality Assumptions

For this $n$, select the $\mathbf{A}_i$ and $\mathbf{B}$ so that $|B|$ is as small as possible.

Let $\alpha \prec \beta$ be a type-2 prime quotient of $\mathbf B$ 
whose minimal sets have nonempty tails, and choose $\beta$ minimal with respect to this property.

<p class="fragment" align="left">
This implies $\beta$ is join 
irreducible and $\alpha$ is its unique subcover (HM Lemma 6.2).
</p>

---

### Fourfold Path to a Proof

<a style="color:#e7ad52">**Lemma 1**</a>  
Suppose $U$ is an $\langle \alpha, \beta \rangle$-minimal set and $0, 1 \in U$ and $(0,1) \in \beta - \alpha$ and $t \in Tail(U)$

Then $\beta = \operatorname{Cg}(0,1)$ and $\mathbf B$ is generated by $\{0, 1, t\}$.

<p class="fragment" align="left">
<a style="color:#e7ad52">**Lemma 2**</a>  
For every $s \subset [n]$,
  either $\beta \leq \rho_s$ or $\alpha \vee \rho_s = 1_B$.
</p>

<p class="fragment" align="left">
<a style="color:#e7ad52">**Lemma 3**</a>  
$\forall \; s \subset [n], \quad
\forall \; v\in B, \quad \forall \; b\in Body(U), \qquad (v,b) \in \beta \circ \rho_s \cap \rho_s \circ \beta$.
</p>

<p class="fragment" align="left">
<a style="color:#e7ad52">**Lemma 4**</a>  
There exist $i$ and $j$ such that $\alpha \vee \rho_i = 1_B$ and $\alpha \vee \rho_j < 1_B$.
</p>


---

## Theorem

Let $\mathcal V$ be the variety generated by a finite set $\mathcal S$ of finite idempotent algebras that is closed under taking subalgebras. 

<p class="fragment" align="left">
Suppose $\mathcal V$ omits 1 and some finite member of $\mathcal V$ has a prime quotient of type 2 whose minimal sets have non-empty tails.
</p>

<p class="fragment" align="left">
Then there is some 3-generated algebra with this property that belongs to $\mathcal S$ or is a subdirect product of two algebras from $\mathcal S$. 
</p>

---

## Proof

<p class="fragment" align="left">
By Lemma 1, $\mathbf B$ is 3-generated. 
</p>

<p class="fragment" align="left">
If $n > 1$ then Lemmas 2 and 4 imply $\exists$ $i, j$
such that $\beta \leq \rho_i$ and $\alpha \vee \rho_j = 1_B$. 
</p>

<p class="fragment" align="left">
If $n > 2$ then Lemma 2 applies to $\rho = \rho_i
\wedge \rho_j$, so either   
(1) $\beta \leq \rho$ or     
(2) $\alpha \vee \rho = 1_B$.
</p>

<p class="fragment" align="left">
(1) impossible, since $\beta \not\le \rho_j$   
(2) impossible, since both $\alpha$ and $\rho$ are below $\rho_i$.    

So, $n\leq 2$ and the theorem is proved.
</p>

---

## Future Work

### Questions

<p class="fragment" align="left">
Is there a poly-time algorithm for producing a difference term when such a term is known to exist?
</p>

### Conjectures

<p class="fragment" align="left">
This new test for existence of a difference term will soon appear in the *Idempotent* menu of UACalc.
</p>

---

## Thank you!